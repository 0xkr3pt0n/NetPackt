import psycopg2

class api_database:
    def __init__(self):
        try:
            # Connection to the CVE database
            connection = psycopg2.connect(
                host="localhost",
                database="netpackt",  
                user="postgres",
                password="postgres"
            )
            self.connection = connection
            self.cursor = connection.cursor()
        except Exception as e:
            print("Error connecting to database : ", e)
    
    def get_apiOption(self, userid):
        query = f"SELECT api_option FROM auth_user WHERE id = {userid}"
        self.cursor.execute(query)
        result = self.cursor.fetchone()
        self.connection.commit()
        return result
   
    def DisableAPI(self, userid):
        query = f"UPDATE auth_user set api_option = 0 WHERE id = {userid}"
        result = self.cursor.execute(query)
        self.connection.commit()
    def EnableAPI(self, userid):
        query = f"UPDATE auth_user set api_option = 1 WHERE id = {userid}"
        result = self.cursor.execute(query)
        self.connection.commit()